<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>postMessage Demo: Receiver</title>
</head>
<body>
	<h1>Receiver Window zzzzz</h1>
	<p>
		This document is on the domain: http://demos.matt-west.com
	</p>
	
	<table id="table"><tbody>
		<tr><td >a</td><td >a</td><td >a</td></tr>
		<tr><td >b</td><td >b</td><td >b</td></tr></tbody></table>
	
	<div id="message"></div>

	<script>
window.onload = function() {
	// Get a reference to the <div> on the page that will display the
	// message text.
	var messageEle = document.getElementById('message');
	var tableEle = document.getElementById('table');

	// A function to process messages received by the window.
	function receiveMessage(e) {
		// Check to make sure that this message came from the correct domain.
		if (e.origin !== "https://cdpn.io")
			return;

		// Update the div element to display the message.
		messageEle.innerHTML = "Message Received: " + e.data;
		document.head.insertAdjacentHTML("beforeend", `<style>#table {background:red}</style>`)
	}

	// Setup an event listener that calls receiveMessage() when the window
	// receives a new MessageEvent.
	window.addEventListener('message', receiveMessage);
}
</script>
</body>
</html>
